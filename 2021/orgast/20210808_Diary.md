## 今日の積み上げ
runteq6日目。web技術chapter3終了。明日は現場railsも進めたいです！
## web技術chapter-3
## HTTPメッセージ
webブラウザとwebサーバーの間でやりとりする際データ形式。要求と応答。webサーバーに対して要求をするのが、HTTPリクエスト。webサーバーがwebブラウザに対して返すのがHTTPレスポンス。
どのようなデータが欲しいのかを伝えて、それに応答する。
## HTTPリクエストの構成
1. リクエスト行（webサーバーに対してどのような処理を依頼するのかを伝える）
2. メッセージヘッダー（webブラウザの種類や言語の情報などを伝える）
3. 空白行
4. メッセージボディ（ウェブサーバーにデータを送るために使われる。空の場合もある）
## HTTPレスポンスの構成
1. ステータス行　（webサーバー内での処理結果を伝える）
2. メッセージヘッダー（webサーバーの種類、データ形式）
3. 空白行
4. メッセージボディー（HTMLや画像などのデータを格納する場所）
## HTTPメソッド
webサーバーに具体的な要求内容を伝えているのはHTTPリクエスト内に含まれるHTTPメソッド。
- POSTメソッド(データをwebサーバに対して送信する時)
- GETメソッド（HTMLファイルなどのコンテンツを要求したい時）
## GETとPOSTの違い(データを送る時)
```
GET:リクエスト行| GET/login.html?name=test&pass=123
```
```
POST:リクエスト行|POST/login.html HTTP/1.1
     メッセージボディ|name=test&pass=123
```
GETメソッドを利用してデータを送信する場合は、URLの後ろにデータを付与して送る。データがブラウザの閲覧履歴に残る。文字数が制限される。
POSTメソッドを利用する場合は、HTTPリクエスト内のメッセージボディ内にデータを含めて送る。個人情報などの機密性が守れる。大量にデータを送れる。
## ステータスコード
HTTPレスポンス内のHTTPリクエストに対するwebサーバー内での処理結果。ステータスコードは３桁の数字からなり、１００番から５００番の5つに分類されている。
- 100番台　HTTPリクエストが処理中である事を通知する。受け入れ可能かどうかの一時応答で使用される。
- 200番台　HTTPリクエストに対して正常に処理した場合に通知する。webサイトが正常に表示された場合に使用される。
- 300番台　HTTPリクエストに対して転送処理などを通知する。webサイトのURLが変更されている場合などに使用される。
- 400番台　リクエストされたHTMLファイルなどがwebサーバーに存在しない場合に使用される。「404 NOT Found」などはよく見かける。
- 500番台　webサーバーが高負荷状態で一時的にコンテンツを転送できない場合に使用される。
## メッセージヘッダー
HTTPリクエストにもHTTPレスポンスにもある。HTTPメッセージに関する詳細な情報を送信する。4つのヘッダーフィールドから成り立つ。
## TCPによるデータ通信
HTTPのやり取りを行うのはTCPの役割。クライアントとサーバーがお互い通信できるかを確認し、コネクションを確立した上でデータのやり取りを行う。コネクションの確立は３回のやり取りで行われる。クライアントからの接続要求（SYNパケット送信)。サーバーからの確認応答、及サーバーからの接続要求（SYN+ACK）。クライアントからの確認応答（ACKパケット）。ACKは確認応答と言う意味。
## HTTP/1.1のやり取り
HTTPキープアライブ（コネクションを継続して利用する）、HTTPパイプライン（一度に複数のHTTPリクエストを送信できる）
## HTTP/2のやり取り
HTTP１.１ではレスポンスはリクエストの順番通りに返さなければならなかったが、HTTP2ではHTTPリクエストがストリーム上で処理されるようになり、レスポンスの順番待ちがなくなったので高速で処理できるようになった。その他にも、バイナリ形式の利用、ヘッダー圧縮、サーバープッシュなどが改良点。
## HTTPS( HTTP over SSL/TLS )の仕組み
暗号化通信、改ざん防止（メッセージダイジェスト）、なりすましぼうし（SLLサーバー証明書の発行）。TCPコネクションが確立された後、SSL/TLSハンドシェイクで準備をする。
## ステートレストステートフル
HTTPリクエストとHTTPレスポンスのやり取りを保持するやり方（ネットショッピングなど）を、ステートフルといい、保持しないやり方をステートレスという。httpはステートレス
## Cookie
保持したい情報をCookieとしてブラウザに保存する。送信にはメッセージヘッダーが利用される。有効期限が設定されてないCookieはブラウザが閉じられると同時に削除される。これを「セッションCookie」という。有効期限が設定されているときは、ブラウザ上に残る。セキュリティの面でセッションCookieがよく利用される。
## セッション
webブラウザとwebサーバーのやり取りにおいて、一連の関連性のある処理の流れをセッションという。商品を選ぶ、買い物カゴに入れる、中身を確認する、商品を購入するといった流れのこと。セッションのデータはセッションIDと紐付けて管理される。サーバーがデータを保持する。
## URI
情報やデータを識別するための記述方法。HTTPでも使われており、GET http〜の形で表す（URL）。リソースの場所を示すものをURLという。リソースの名前を示すURNもある。
絶対URIと相対URIがあり、通常は相対URIが使われる。
## パーセントコーディング
URIで利用できる文字は決められている。日本語などは%の後に16進数で表した形で変換される。

